# The configuration for each tool is done in tool_destinations.yml. You may either edit
# this file in the root folder and run make clean then make install, or you can
# edit this file directly in galaxy_path/config/tool_destinations.yml
#
# The configuration will have three main levels (or key properties) - tools,
# default_destination, and verbose.
#
# Under tools is where you put the IDs of the tools. Tool IDs must be
# distinct. In each tool is a list of rules, each of which contain rule-specific
# paremeters. DynamicToolDestination.py is set up to allow and fix a few light errors
# in the config, but it's best to follow the specified template.
#
# default_destination, the second key property, specifies which global destination
# to default to in case none of the rules apply.
#
# A third key property is verbose. When this is set to True, Dynamic Tool Destination
# gives much more descriptive output regarding the steps it's taking in mapping your tools to
# the appropriate destinations, including config validation and any potential errors found in the
# config.
#
# The general template is as follows (note that this template
# does not use quote symbols), using spades and smalt as an example
# (spades for showing what each field is for, and smalt
# to give a fairly real-world example):
#
# Ex:
#
# tools:
#   spades:
# 	rules:
#       - rule_type: what kind of rule is it?
#         nice_value: what kind of priority does this rule have over others?
#         destination: how should this tool be run?
#         lower_bound: what's the max file size?
#         upper_bound: what's the minimum file size?
# 	default_destination: this tool-specific field is optional
#   smalt_map:
#     rules:
#       - rule_type: file_size
#         nice_value: 0
#         lower_bound: 0
#         upper_bound: 2 GB
#         destination: cluster_low_4
#       - rule_type: file_size
#         nice_value: 0
#         lower_bound: 2 GB
#         upper_bound: 4 GB
#         destination: cluster_low_8
#       - rule_type: file_size
#         nice_value: 0
#         lower_bound: 4 GB
#         upper_bound: Infinity
#         destination: cluster_low_16
#     default_destination: cluster_default
# default_destination: this global field is mandatory
# verbose: True
#
#
#
# Looking at this example, some things must be clarified: each entry in the list of
# rules per tool is specified by '-'. Per rule, regardless of rule type,
# the following fields are mandatory:
# rule_type, nice_value, and destination.
#
# Some of the other fields are mandatory only for specific rule types, which will be
# further discussed below.
#
# Starting with rule_type, there are currently 3 rule types: file_size, records,
# and arguments.
#
# file_size and records rules are based on how large the files are: if they fall
# within specified limits, then the rule is satisfied, and the tool may proceed
# with the appropriate destination.
#
# file_size and records rules have the following required parameters on top of the base
# mandatory parameters:
# upper_bound
# lower_bound
#
# Bounds are allowed to be specified in bytes (48000 for example) or a higher size unit,
# including the unit abbreviation (4 GB or 10 TB for example). Additionally, upper_bound
# is allowed to be Infinite; simply specify Infinite in order to do so.
#
# **The rule will allow the lower_bound, up to but not including the upper_bound
#
# The third rule_type is arguments, which has arguments as a mandatory parameter ontop of
# the base mandatory parameters. The arguments parameter is specified using the following
# template:
#
#
# arguments:
#   argument_name: the_argument
#
#
# A real world example is shown below:
#
#
# tools:
#   spades:
#     rules:
#       - rule_type: arguments
#         nice_value: -19
#         destination: fail
#         fail_message: Don't do that
#         arguments:
#           careful: true
#     default_destination: cluster_low
# default_destination: cluster
# verbose: False
#
#
# Next up, nice_value is used for prioritizing rules over others in case two rules
# match. nice_value basically translates to, "the higher the nice_value, the 'nicer'
# the tool is about being picked last". So based off of that idea, a rule with a nice
# value of -5 is guaranteed to be picked over a rule with a nice value of 10. nice_value
# is allowed to go from -20 to 20. If two rules have the same nice value and both were
# satisfied, the first rule in the config file will be picked. In summary, first-come-
# first-serve basis unless nice_value overrides that.
#
#
# Finally, destination simply refers to the specific way the tool will run. Each
# destination ID refers to a specific configuration to run the tool with.
#
# Some rules may call for the job to fail if certain conditions are encountered. In
# this case, destination simply refers to 'fail'.
#
# For example, the following rule is set to fail the job if a file that is too large
# (more than 4GB) is encountered:
#
#
# tools:
#   spades:
#     rules:
#       - rule_type: file_size
#         nice_value: 0
#         destination: fail
#         fail_message: Data too large
#         lower_bound: 4 GB
#         upper_bound: Infinity
#
#
# As shown above, a rule with 'fail' as the destination requires an additional
# parameter, 'fail_message', which DynamicToolDestination uses to print a helpful error
# message to the user indicating why the job failed (showing up inside the job log in
# Galaxy's history panel).


tools:
  shovill:
    rules:
      - rule_type: file_size
        nice_value: 0
        lower_bound: 0
        upper_bound: 10 MB
        fail_message: Too few reads for shovill to work
        destination: fail
      - rule_type: file_size
        nice_value: 0
        lower_bound: 10 MB
        upper_bound: 1.5 GB
        destination:
          priority:
            low: slurm_spades_8core_24G_NMLResearch
            med: slurm_spades_8core_24G_Reference/Surveillance
            high: slurm_spades_8core_24G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1.5 GB
        upper_bound: 4 GB
        destination:
          priority:
            low: slurm_spades_8core_32G_NMLResearch
            med: slurm_spades_8core_32G_Reference/Surveillance
            high: slurm_spades_8core_32G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 4 GB
        upper_bound: 10 GB
        destination:
          priority:
            low: slurm_spades_8core_56G_NMLResearch
            med: slurm_spades_8core_56G_Reference/Surveillance
            high: slurm_spades_8core_56G_OutbreakResponse
      - rule_type: file_size
      - rule_type: file_size
        nice_value: 0
        lower_bound: 10 GB
        upper_bound: Infinity
        fail_message: Too much data, not running
        destination: fail
    default_destination:
      priority:
        low: slurm_spades_8core_24G_NMLResearch
        med: slurm_spades_8core_24G_Reference/Surveillance
        high: slurm_spades_8core_24G_OutbreakResponse
  spades:
    rules:
      - rule_type: file_size
        nice_value: 0
        lower_bound: 0
        upper_bound: 10 MB
        fail_message: Too few reads for spades to work
        destination: fail
      - rule_type: file_size
        nice_value: 0
        lower_bound: 10 MB
        upper_bound: 1 GB
        destination:
          priority:
            low: slurm_spades_8core_32G_NMLResearch
            med: slurm_spades_8core_32G_Reference/Surveillance
            high: slurm_spades_8core_32G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1 GB
        upper_bound: 1.5 GB
        destination:
          priority:
            low: slurm_spades_8core_32G_NMLResearch
            med: slurm_spades_8core_32G_Reference/Surveillance
            high: slurm_spades_8core_32G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1.5 GB
        upper_bound: 2 GB
        destination:
          priority:
            low: slurm_spades_8core_56G_NMLResearch
            med: slurm_spades_8core_56G_Reference/Surveillance
            high: slurm_spades_8core_56G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 2 GB
        upper_bound: 3 GB
        destination:
          priority:
            low: slurm_spades_8core_56G_NMLResearch
            med: slurm_spades_8core_56G_Reference/Surveillance
            high: slurm_spades_8core_56G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 3 GB
        upper_bound: 4 GB
        destination:
          priority:
            low: slurm_spades_8core_64G_NMLResearch
            med: slurm_spades_8core_64G_Reference/Surveillance
            high: slurm_spades_8core_64G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 4 GB
        upper_bound: 10 GB
        destination:
          priority:
            low: slurm_spades_8core_96G_NMLResearch
            med: slurm_spades_8core_96G_Reference/Surveillance
            high: slurm_spades_8core_96G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 10 GB
        upper_bound: Infinity
        fail_message: Too much data, not running
        destination: fail
    default_destination:
      priority:
        low: slurm_spades_8core_32G_NMLResearch
        med: slurm_spades_8core_32G_Reference/Surveillance
        high: slurm_spades_8core_32G_OutbreakResponse
  metaspades:
    rules:
      - rule_type: file_size
        nice_value: 0
        lower_bound: 0
        upper_bound: 10 MB
        fail_message: Too few reads for metaspades to work
        destination: fail
      - rule_type: file_size
        nice_value: 0
        lower_bound: 10 MB
        upper_bound: 1 GB
        destination:
          priority:
            low: slurm_spades_8core_32G_NMLResearch
            med: slurm_spades_8core_32G_Reference/Surveillance
            high: slurm_spades_8core_32G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1 GB
        upper_bound: 1.5 GB
        destination:
          priority:
            low: slurm_spades_8core_32G_NMLResearch
            med: slurm_spades_8core_32G_Reference/Surveillance
            high: slurm_spades_8core_32G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1.5 GB
        upper_bound: 2 GB
        destination:
          priority:
            low: slurm_spades_8core_56G_NMLResearch
            med: slurm_spades_8core_56G_Reference/Surveillance
            high: slurm_spades_8core_56G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 2 GB
        upper_bound: 3 GB
        destination:
          priority:
            low: slurm_spades_8core_56G_NMLResearch
            med: slurm_spades_8core_56G_Reference/Surveillance
            high: slurm_spades_8core_56G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 3 GB
        upper_bound: 4 GB
        destination:
          priority:
            low: slurm_spades_8core_64G_NMLResearch
            med: slurm_spades_8core_64G_Reference/Surveillance
            high: slurm_spades_8core_64G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 4 GB
        upper_bound: 4.5 GB
        destination:
          priority:
            low: slurm_spades_8core_96G_NMLResearch
            med: slurm_spades_8core_96G_Reference/Surveillance
            high: slurm_spades_8core_96G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 4.5 GB
        upper_bound: Infinity
        fail_message: Too much data, not running
        destination: fail
    default_destination:
      priority:
        low: slurm_spades_8core_32G_NMLResearch
        med: slurm_spades_8core_32G_Reference/Surveillance
        high: slurm_spades_8core_32G_OutbreakResponse       
  plasmidspades:
    rules:
      - rule_type: file_size
        nice_value: 0
        lower_bound: 0
        upper_bound: 10 MB
        fail_message: Too few reads for spades to work
        destination: fail
      - rule_type: file_size
        nice_value: 0
        lower_bound: 10 MB
        upper_bound: 1 GB
        destination:
          priority:
            low: slurm_spades_8core_32G_NMLResearch
            med: slurm_spades_8core_32G_Reference/Surveillance
            high: slurm_spades_8core_32G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1 GB
        upper_bound: 1.5 GB
        destination:
          priority:
            low: slurm_spades_8core_32G_NMLResearch
            med: slurm_spades_8core_32G_Reference/Surveillance
            high: slurm_spades_8core_32G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1.5 GB
        upper_bound: 2 GB
        destination:
          priority:
            low: slurm_spades_8core_56G_NMLResearch
            med: slurm_spades_8core_56G_Reference/Surveillance
            high: slurm_spades_8core_56G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 2 GB
        upper_bound: 3 GB
        destination:
          priority:
            low: slurm_spades_8core_56G_NMLResearch
            med: slurm_spades_8core_56G_Reference/Surveillance
            high: slurm_spades_8core_56G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 3 GB
        upper_bound: 4 GB
        destination:
          priority:
            low: slurm_spades_8core_64G_NMLResearch
            med: slurm_spades_8core_64G_Reference/Surveillance
            high: slurm_spades_8core_64G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 4 GB
        upper_bound: 4.5 GB
        destination:
          priority:
            low: slurm_spades_8core_96G_NMLResearch
            med: slurm_spades_8core_96G_Reference/Surveillance
            high: slurm_spades_8core_96G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 4.5 GB
        upper_bound: Infinity
        fail_message: Too much data, not running. Please downsample with tool seqtk
        destination: fail
    default_destination:
      priority:
        low: slurm_spades_8core_32G_NMLResearch
        med: slurm_spades_8core_32G_Reference/Surveillance
        high: slurm_spades_8core_32G_OutbreakResponse
  srst2:
    rules:
      - rule_type: file_size
        nice_value: 0
        lower_bound: 0
        upper_bound: 5 GB
        destination:
          priority:
            low: slurm_8core_8G_NMLResearch
            med: slurm_8core_8G_Reference/Surveillance
            high: slurm_8core_8G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 5 GB
        upper_bound: Infinity
        destination:
          priority:
            low: slurm_8core_16G_NMLResearch
            med: slurm_8core_16G_Reference/Surveillance
            high: slurm_8core_16G_OutbreakResponse
      - rule_type: records
        nice_value: 0
        lower_bound: 0
        upper_bound: 100
        destination:
          priority:
            low: slurm_4core_4G_NMLResearch
            med: slurm_4core_4G_Reference/Surveillance
            high: slurm_4core_4G_OutbreakResponse
      - rule_type: records
        nice_value: 0
        lower_bound: 100
        upper_bound: 1000
        destination:
          priority:
            low: slurm_8core_8G_NMLResearch
            med: slurm_8core_8G_Reference/Surveillance
            high: slurm_8core_8G_OutbreakResponse
      - rule_type: records
        nice_value: 0
        lower_bound: 1000
        upper_bound: 10000
        destination:
          priority:
            low: slurm_8core_16G_NMLResearch
            med: slurm_8core_16G_Reference/Surveillance
            high: slurm_8core_16G_OutbreakResponse
      - rule_type: records
        nice_value: 0
        lower_bound: 1000000
        upper_bound: Infinity
        fail_message: Using the wrong tool
        destination: fail
    default_destination:
      priority:
        low: slurm_4core_4G_NMLResearch
        med: slurm_4core_4G_Reference/Surveillance
        high: slurm_4core_4G_OutbreakResponse
  smalt:
    rules:
      - rule_type: file_size
        nice_value: 0
        lower_bound: 0
        upper_bound: 1 GB
        destination:
          priority:
            low: slurm_4core_4G_NMLResearch
            med: slurm_4core_4G_Reference/Surveillance
            high: slurm_4core_4G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1 GB
        upper_bound: 2 GB
        destination:
          priority:
            low: slurm_8core_8G_NMLResearch
            med: slurm_8core_8G_Reference/Surveillance
            high: slurm_8core_8G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 2 GB
        upper_bound: 4 GB
        destination:
          priority:
            low: slurm_8core_12G_NMLResearch
            med: slurm_8core_12G_Reference/Surveillance
            high: slurm_8core_12G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 4 GB
        upper_bound: Infinity
        destination:
          priority:
            low: slurm_8core_24G_NMLResearch
            med: slurm_8core_24G_Reference/Surveillance
            high: slurm_8core_24G_OutbreakResponse
    default_destination:
      priority:
        low: slurm_default_NMLResearch
        med: slurm_default_Reference/Surveillance
        high: slurm_default_OutbreakResponse
  smalt_map:
    rules:
      - rule_type: file_size
        nice_value: 0
        lower_bound: 0
        upper_bound: 1 GB
        destination:
          priority:
            low: slurm_4core_4G_NMLResearch
            med: slurm_4core_4G_Reference/Surveillance
            high: slurm_4core_4G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1 GB
        upper_bound: 2 GB
        destination:
          priority:
            low: slurm_8core_8G_NMLResearch
            med: slurm_8core_8G_Reference/Surveillance
            high: slurm_8core_8G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 2 GB
        upper_bound: 4 GB
        destination:
          priority:
            low: slurm_8core_12G_NMLResearch
            med: slurm_8core_12G_Reference/Surveillance
            high: slurm_8core_12G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 4 GB
        upper_bound: Infinity
        destination:
          priority:
            low: slurm_8core_24G_NMLResearch
            med: slurm_8core_24G_Reference/Surveillance
            high: slurm_8core_24G_OutbreakResponse
    default_destination:
      priority:
        low: slurm_default_NMLResearch
        med: slurm_default_Reference/Surveillance
        high: slurm_default_OutbreakResponse
  vcf2pseudoalignment:
    rules:
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 0
        upper_bound: 20
        destination:
          priority:
            low: slurm_4core_32G_NMLResearch
            med: slurm_4core_32G_Reference/Surveillance
            high: slurm_4core_32G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 20
        upper_bound: 100
        destination:
          priority:
            low: slurm_16core_60G_NMLResearch
            med: slurm_16core_60G_Reference/Surveillance
            high: slurm_16core_60G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 100 
        upper_bound: 200
        destination:
          priority:
            low: slurm_16core_128G_NMLResearch
            med: slurm_16core_128G_Reference/Surveillance
            high: slurm_16core_128G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 200 
        upper_bound: 400
        destination:
          priority:
            low: slurm_16core_160G_NMLResearch
            med: slurm_16core_160G_Reference/Surveillance
            high: slurm_16core_160G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 400
        upper_bound: 600
        destination:
          priority:
            low: slurm_16core_224G_NMLResearch
            med: slurm_16core_224G_Reference/Surveillance
            high: slurm_16core_224G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 600 
        upper_bound: Infinity
        destination:
          priority:
            low: slurm_32core_288G_NMLResearch
            med: slurm_32core_288G_Reference/Surveillance
            high: slurm_32core_288G_OutbreakResponse
    default_destination:
      priority:
        low: slurm_16core_128G_NMLResearch
        med: slurm_16core_128G_Reference/Surveillance
        high: slurm_16core_128G_OutbreakResponse
  vcf2snvalignment:
    rules:
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 0
        upper_bound: 20
        destination:
          priority:
            low: slurm_4core_32G_NMLResearch
            med: slurm_4core_32G_Reference/Surveillance
            high: slurm_4core_32G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 20
        upper_bound: 100
        destination:
          priority:
            low: slurm_16core_60G_NMLResearch
            med: slurm_16core_60G_Reference/Surveillance
            high: slurm_16core_60G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 100
        upper_bound: 200
        destination:
          priority:
            low: slurm_16core_128G_NMLResearch
            med: slurm_16core_128G_Reference/Surveillance
            high: slurm_16core_128G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 200
        upper_bound: 400
        destination:
          priority:
            low: slurm_16core_160G_NMLResearch
            med: slurm_16core_160G_Reference/Surveillance
            high: slurm_16core_160G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 400
        upper_bound: 600
        destination:
          priority:
            low: slurm_16core_224G_NMLResearch
            med: slurm_16core_224G_Reference/Surveillance
            high: slurm_16core_224G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 600
        upper_bound: Infinity
        destination:
          priority:
            low: slurm_32core_288G_NMLResearch
            med: slurm_32core_288G_Reference/Surveillance
            high: slurm_32core_288G_OutbreakResponse
    default_destination:
      priority:
        low: slurm_default_NMLResearch
        med: slurm_default_Reference/Surveillance
        high: slurm_default_OutbreakResponse
  fastqc:
    default_destination:
      priority:
        low: slurm_java_2core_48G_fastqc
        med: slurm_java_2core_48G_fastqc
        high: slurm_java_2core_48G_fastqc
  beast:
    default_destination:
      priority:
        low: slurm_1core_32G_NMLResearch
        med: slurm_1core_32G_Reference/Surveillance
        high: slurm_1core_32G_OutbreakResponse
  kat_filter:
    default_destination:
      priority:
        low: slurm_6core_8G_NMLResearch
        med: slurm_6core_8G_Reference/Surveillance
        high: slurm_6core_8G_OutbreakResponse
  PicardInsertSize:
    default_destination:
      priority:
        low: slurm_1core_32G_NMLResearch
        med: slurm_1core_32G_Reference/Surveillance
        high: slurm_1core_32G_OutbreakResponse
  picard_SamToFastq:
    default_destination:
      priority:
        low: slurm_1core_32G_NMLResearch
        med: slurm_1core_32G_Reference/Surveillance
        high: slurm_1core_32G_OutbreakResponse
  bam2mappingstats:
    default_destination:
      priority:
        low: slurm_1core_12G_NMLResearch
        med: slurm_1core_12G_Reference/Surveillance
        high: slurm_1core_12G_OutbreakResponse
  prokka:
    default_destination:
      priority:
        low: slurm_16core_48G_NMLResearch
        med: slurm_16core_48G_Reference/Surveillance
        high: slurm_16core_48G_OutbreakResponse
  trimmomatic:
    default_destination:
      priority:
        low: slurm_1core_12G_NMLResearch
        med: slurm_1core_12G_Reference/Surveillance
        high: slurm_1core_12G_OutbreakResponse
  neptune:
    rules:
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 0
        upper_bound: 20
        destination:
          priority:
            low: slurm_4core_32G_NMLResearch
            med: slurm_4core_32G_Reference/Surveillance
            high: slurm_4core_32G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 20
        upper_bound: 100
        destination:
          priority:
            low: slurm_16core_60G_NMLResearch
            med: slurm_16core_60G_Reference/Surveillance
            high: slurm_16core_60G_OutbreakResponse
      - rule_type: num_input_datasets
        nice_value: 0
        lower_bound: 100 
        upper_bound: Infinity
        destination:
          priority:
            low: slurm_16core_500G_NMLResearch
            med: slurm_16core_500G_Reference/Surveillance
            high: slurm_16core_500G_OutbreakResponse
    default_destination:
      priority:
        low: slurm_8core_64G_NMLResearch
        med: slurm_8core_64G_Reference/Surveillance
        high: slurm_8core_64G_OutbreakResponse
  picard_BamIndexStats:
    default_destination:
      priority:
        low: slurm_1core_32G_NMLResearch
        med: slurm_1core_32G_Reference/Surveillance
        high: slurm_1core_32G_OutbreakResponse
  picard_AddOrReplaceReadGroups:
    default_destination:
      priority:
        low: slurm_14core_16G_NMLResearch
        med: slurm_14core_16G_Reference/Surveillance
        high: slurm_14core_16G_OutbreakResponse
  deeptools_compute_gc_bias:
    default_destination:
      priority:
        low: slurm_14core_16G_NMLResearch
        med: slurm_14core_16G_Reference/Surveillance
        high: slurm_14core_16G_OutbreakResponse
  kraken_database_builder:
    default_destination:
      priority:
        low: slurm_32core_500G_NMLResearch
        med: slurm_32core_500G_Reference/Surveillance
        high: slurm_32core_500G_OutbreakResponse
  gapfiller:
    default_destination:
      priority:
        low: slurm_1core_8G_NMLResearch
        med: slurm_1core_8G_Reference/Surveillance
        high: slurm_1core_8G_OutbreakResponse
  kraken:
    rules:
      - rule_type: arguments
        nice_value: 0
        destination:
          priority:
            low: slurm_16core_128G_NMLResearch
            med: slurm_16core_128G_Reference/Surveillance
            high: slurm_16core_128G_OutbreakResponse
        arguments:
          kraken_database: 'mus_musculus'
    rules:
      - rule_type: arguments
        nice_value: 0
        destination:
          priority:
            low: slurm_4core_8G_NMLResearch
            med: slurm_4core_8G_Reference/Surveillance
            high: slurm_4core_8G_OutbreakResponse
        arguments:
          kraken_database: 'minikraken_20141208'
      - rule_type: arguments
        nice_value: 0
        destination:
          priority:
            low: slurm_4core_8G_NMLResearch
            med: slurm_4core_8G_Reference/Surveillance
            high: slurm_4core_8G_OutbreakResponse
        arguments:
          kraken_database: 'measles'
      - rule_type: arguments
        nice_value: 0
        destination:
          priority:
            low: slurm_16core_160G_NMLResearch
            med: slurm_16core_160G_Reference/Surveillance
            high: slurm_16core_160G_OutbreakResponse
        arguments:
          kraken_database: 'kraken_bvfpa_080416'
      - rule_type: arguments
        nice_value: 0
        destination:
          priority:
            low: slurm_16core_160G_NMLResearch
            med: slurm_16core_160G_Reference/Surveillance
            high: slurm_16core_160G_OutbreakResponse
        arguments:
          kraken_database: 'kraken_bvfpao_09142016'
      - rule_type: arguments
        nice_value: 0
        destination:
          priority:
            low: slurm_16core_192G_NMLResearch
            med: slurm_16core_192G_Reference/Surveillance
            high: slurm_16core_192G_OutbreakResponse
        arguments:
          kraken_database: 'kraken_bvfpahm_20161121'
      - rule_type: arguments
        nice_value: 0
        destination:
          priority:
            low: slurm_16core_192G_NMLResearch
            med: slurm_16core_192G_Reference/Surveillance
            high: slurm_16core_192G_OutbreakResponse
        arguments:
          kraken_database: 'kraken_bvfpahm_sepPlas_20161122'
      - rule_type: arguments
        nice_value: 0
        destination:
          priority:
            low: slurm_16core_224G_NMLResearch
            med: slurm_16core_224G_Reference/Surveillance
            high: slurm_16core_224G_OutbreakResponse
        arguments:
          kraken_database: 'kraken_bvfpahms_20170622'
    default_destination:
      priority:
        low: slurm_16core_128G_NMLResearch
        med: slurm_16core_128G_Reference/Surveillance
        high: slurm_16core_128G_OutbreakResponse
  phyml1:
    default_destination:
      priority:
        low: slurm_1core_12G_NMLResearch
        med: slurm_1core_12G_Reference/Surveillance
        high: slurm_1core_12G_OutbreakResponse
  verify_map:
     rules:
      - rule_type: file_size
        nice_value: 0
        lower_bound: 0
        upper_bound: 1 GB
        destination:
          priority:
            low: slurm_4core_8G_NMLResearch
            med: slurm_4core_8G_Reference/Surveillance
            high: slurm_4core_8G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 1 GB
        upper_bound: 2 GB
        destination:
          priority:
            low: slurm_8core_16G_NMLResearch
            med: slurm_8core_16G_Reference/Surveillance
            high: slurm_8core_16G_OutbreakResponse
      - rule_type: file_size
        nice_value: 0
        lower_bound: 2 GB
        upper_bound: Infinity
        destination:
          priority:
            low: slurm_8core_32G_NMLResearch
            med: slurm_8core_32G_Reference/Surveillance
            high: slurm_8core_32G_OutbreakResponse
     default_destination:
       priority:
         low: slurm_16core_16G_NMLResearch
         med: slurm_16core_16G_Reference/Surveillance
         high: slurm_16core_16G_OutbreakResponse
  hivtrace:
    default_destination:
      priority:
        low: slurm_16core_16G_NMLResearch
        med: slurm_16core_16G_Reference/Surveillance
        high: slurm_16core_16G_OutbreakResponse
  kat_filter_seq:
    default_destination:
      priority:
        low: slurm_6core_8G_NMLResearch
        med: slurm_6core_8G_Reference/Surveillance
        high: slurm_6core_8G_OutbreakResponse
  ncbi_blastn_wrapper:
    default_destination:
      priority:
        low: slurm_8core_96G_NMLResearch
        med: slurm_8core_96G_Reference/Surveillance
        high: slurm_8core_96G_OutbreakResponse
  kat_sect:
    default_destination:
      priority:
        low: slurm_16core_16G_NMLResearch
        med: slurm_16core_16G_Reference/Surveillance
        high: slurm_16core_16G_OutbreakResponse
  mentalist_call:
    default_destination:
      priority:
        low: slurm_1core_32G_NMLResearch
        med: slurm_1core_32G_Reference/Surveillance
        high: slurm_1core_32G_OutbreakResponse
  mentalist_download_pubmlst:
    default_destination:
      priority:
        low: slurm_1core_8G_NMLResearch
        med: slurm_1core_8G_Reference/Surveillance
        high: slurm_1core_8G_OutbreakResponse
  mentalist_download_cgmlst:
    default_destination:
      priority:
        low: slurm_1core_32G_NMLResearch
        med: slurm_1core_32G_Reference/Surveillance
        high: slurm_1core_32G_OutbreakResponse
  mentalist_download_enterobase:
    default_destination:
      priority:
        low: slurm_1core_64G_NMLResearch
        med: slurm_1core_64G_Reference/Surveillance
        high: slurm_1core_64G_OutbreakResponse
  mentalist_build_db:
    default_destination:
      priority:
        low: slurm_1core_16G_NMLResearch
        med: slurm_1core_16G_Reference/Surveillance
        high: slurm_1core_16G_OutbreakResponse
default_destination:
  priority:
    low: slurm_default_NMLResearch
    med: slurm_default_Reference/Surveillance
    high: slurm_default_OutbreakResponse
users:
  andrea.d.tyler@phac-aspc.gc.ca:
    priority: med
  philip.mabon2@phac-aspc.gc.ca:
    priority: med
  philip.mabon@phac-aspc.gc.ca:
    priority: med
verbose: True
